name: Build and Deploy
on:
  push:
    branches:
      - main
jobs:
  build:
    runs-on: self-hosted
    steps:
    - name: Checkout
      uses: actions/checkout@v2
    - name: Building
      run: |
      npm install
      npm run prod
    - name: Deploying
      run: |
      DIRECTORY=/var/www/fh.snipcola.com
      SITE_DIRECTORY=./public
      sudo rm -rf $DIRECTORY/*
      sudo mv $SITE_DIRECTORY/* $DIRECTORY